(this.webpackJsonpfridayproject=this.webpackJsonpfridayproject||[]).push([[0],{15:function(e,t,n){e.exports={authBlock:"CommonStylesForAuth_authBlock__15zKS",inputBlock:"CommonStylesForAuth_inputBlock__20tX8"}},26:function(e,t,n){e.exports={default:"SuperButton_default__18Len",red:"SuperButton_red__3BY6U",button:"SuperButton_button__1Ymxf",blink:"SuperButton_blink__3T8lZ"}},32:function(e,t,n){e.exports={superInput:"SuperInputText_superInput__1Gc67",errorInput:"SuperInputText_errorInput__2sjb_",error:"SuperInputText_error__1oSiw"}},33:function(e,t,n){e.exports={checkbox:"SuperCheckbox_checkbox__2dgcj",spanClassName:"SuperCheckbox_spanClassName__3r9pY"}},55:function(e,t,n){},56:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),o=n(2),i=(n(55),n(7)),u=(n(56),n(5)),l=n(3),d=n(44),j=n.n(d).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),b=function(e,t,n){return j.post("auth/login",{email:e,password:t,rememberMe:n})},p=function(){return j.post("auth/me")},h=function(e){return j.post("auth/register",e)},m=function(){return j.delete("auth/me")},O=function(e){return j.put("auth/me",e)},f=function(e,t){return j.post("auth/forgot",{email:e,message:t})},v=function(e,t){return j.post("auth/set-new-password",{password:e,resetPasswordToken:t})},x={isLogged:!1,user:{id:"",email:"",name:"",avatar:""},isRegister:!1,commonError:"",isUpdatedPassword:!1,fogot:!1,isInitialized:!1,updatedUser:{name:"",avatar:""}},g="AUTH/SWITCH-IS-REGISTR",w="AUTH/SET-ERROR-REGISTR",S="AUTH/SET-USER",_="AUTH/SIGN-IN",N="AUTH/SET-UPDATE-USER",C="AUTH/SET-NEW-PASSWORD",E="AUTH/SWITCH-FOGOT",P="IS-INITIALIZED",y=function(e){return{type:w,error:e}},I=function(e){return{type:_,value:e}},k=function(e,t){var n={email:e,password:t};return function(e){h(n).then((function(t){t.data.addedUser?e({type:g,newValueIsRegister:!0}):e(y(t.data.error))})).catch((function(t){e(y("Common error"))}))}},T=function(){return function(e){p().then((function(t){var n=t.data,a=n.id,r=n.email,c=n.name,s=n.avatar;e(function(e,t,n,a){return{type:S,user:{id:e,email:t,name:n,avatar:a}}}(a,r,c,s))}))}},R=function(e){return function(t){O(e).then((function(n){t(function(e){return{type:N,data:e}}(e))})).finally((function(){console.log("check profile")}))}},A=function(){return function(e){p().then((function(t){e(I(!0))})).catch((function(){})).finally((function(){e({type:P,value:!0})}))}},L=function(e,t){return function(n){f(e,t).then((function(e){n({type:E,newFogot:!0})}))}},U=function(e,t){return function(n){v(e,t).then((function(e){0===e.data.error.length?n({type:C,isUpPassword:!0}):n(y(e.data.error))}))}},F=n(1),B=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user.name})),n=Object(o.c)((function(e){return e.auth.user.email})),r=Object(o.c)((function(e){return e.auth.user.avatar})),c=Object(o.c)((function(e){return e.auth.isLogged}));return Object(a.useEffect)((function(){e(T())}),[e]),c?Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:r,alt:""})}),Object(F.jsx)("div",{children:t}),Object(F.jsx)("div",{children:n})]}):Object(F.jsx)(u.a,{to:ce.SIGN_IN})},H=function(){return Object(F.jsx)("div",{children:Object(F.jsx)("h1",{})})},G=n(18),W=n(15),D=n.n(W),Z=function(){Object(o.c)((function(e){return e.auth.fogot}));var e=Object(o.b)(),t=Object(G.a)({initialValues:{email:""},validate:function(e){},onSubmit:function(n){e(L(n.email,"<div style=\"background-color: lime; padding: 15px\"> \n    password recovery link: <a href='https://Tengrix.github.io/fridayproject/new-pass/$token$'>Click to here</a></div>")),t.resetForm()}});return Object(F.jsx)("div",{className:D.a.authBlock,children:Object(F.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(F.jsx)("input",{placeholder:"email",name:"email",onChange:t.handleChange,value:t.values.email}),Object(F.jsx)("button",{type:"submit",children:"Enter"})]})})},M=n(21),z=n(26),V=n.n(z),K=function(e){var t=e.red,n=e.className,a=Object(M.a)(e,["red","className"]),r="".concat(V.a.default).concat(t?V.a.red:V.a.default," ").concat(n);return Object(F.jsx)("button",Object(l.a)(Object(l.a)({className:r},a),{},{children:"LogIn "}))},q=n(32),$=n.n(q),Y=function(e){e.type;var t=e.onChange,n=e.onChangeText,a=e.onKeyPress,r=e.onEnter,c=e.error,s=e.className,o=e.spanClassName,i=Object(M.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),u="".concat($.a.error," ").concat(o||""),d="".concat($.a.errorInput," ").concat(s);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("input",Object(l.a)({type:"text",onChange:function(e){t&&t(e),n&&n(e.currentTarget.value)},onKeyPress:function(e){a&&a(e),r&&"Enter"===e.key&&r()},className:d},i)),c&&Object(F.jsx)("span",{className:u,children:c})]})},J=n(33),X=n.n(J),Q=function(e){e.type;var t=e.onChange,n=e.onChangeChecked,a=e.className,r=(e.spanClassName,e.children),c=Object(M.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),s="".concat(X.a.checkbox," ").concat(a||"");return Object(F.jsxs)("label",{children:[Object(F.jsx)("input",Object(l.a)({type:"checkbox",onChange:function(e){t&&t(e),n&&n(e.currentTarget.checked)},className:s},c)),r&&Object(F.jsx)("span",{className:X.a.spanClassName,children:r})]})},ee=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isLogged})),n=Object(G.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Password required",t},onSubmit:function(t){var a,r,c;e((a=t.email,r=t.password,c=t.rememberMe,function(e){b(a,r,c).then((function(t){e(I(!0))})).catch((function(t){var n=t.res?t.res.data.error:t.message+", more details in the console";console.log("Error:",Object(l.a)({},t)),e(y(n))})).finally((function(){}))})),n.resetForm()}});return t?Object(F.jsx)(u.a,{to:ce.PROFILE}):Object(F.jsx)("form",{onSubmit:n.handleSubmit,className:D.a.authBlock,children:Object(F.jsxs)("div",{className:D.a.inputBlock,children:[Object(F.jsx)("div",{children:Object(F.jsx)(Y,Object(l.a)({placeholder:"Username or email",type:"email"},n.getFieldProps("email")))}),n.touched.email&&n.errors.email&&Object(F.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object(F.jsx)("div",{children:Object(F.jsx)(Y,Object(l.a)({placeholder:"password",type:"password"},n.getFieldProps("password")))}),n.touched.password&&n.errors.password&&Object(F.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(F.jsx)("div",{children:Object(F.jsx)(Q,Object(l.a)({type:"rememberMe"},n.getFieldProps("rememberMe")))}),Object(F.jsx)(K,{type:"submit",children:"Sign in HERE"}),Object(F.jsx)("div",{children:Object(F.jsx)(i.b,{to:ce.RENEWAL_PASS,children:"Forgot password"})})]})})},te=function(){var e=Object(o.c)((function(e){return e.auth.isRegister})),t=Object(o.c)((function(e){return e.auth.commonError})),n=Object(o.b)(),a=Object(G.a)({initialValues:{email:"",password:"",confPass:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password?e.password.length<7&&(t.password="Password should be longer 7 symbols"):t.password="Password required",e.password!==e.confPass&&(t.password="Password not identical"),t},onSubmit:function(e){var t,r;a.resetForm(),t=e.email,r=e.password,n(k(t,r))}});return e?Object(F.jsx)(u.a,{to:"/sign-in"}):Object(F.jsx)("div",{className:D.a.authBlock,children:Object(F.jsxs)("form",{className:D.a.inputBlock,onSubmit:a.handleSubmit,children:[Object(F.jsx)("input",{placeholder:"email:",name:"email",onChange:a.handleChange,value:a.values.email}),a.errors.email&&Object(F.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(F.jsx)("input",{placeholder:"password:",name:"password",type:"password",onChange:a.handleChange,value:a.values.password}),Object(F.jsx)("input",{placeholder:"confirm password:",name:"confPass",type:"password",onChange:a.handleChange,value:a.values.confPass}),a.errors.password&&Object(F.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(F.jsx)("button",{type:"submit",children:"Sign up"}),Object(F.jsx)("div",{style:{color:"red"},children:t})]})})},ne=function(){var e=Object(o.c)((function(e){return e.auth.isUpdatedPassword})),t=Object(o.c)((function(e){return e.auth.commonError})),n=Object(o.b)(),a=Object(u.g)(),r=Object(G.a)({initialValues:{password:"",confPass:""},validate:function(e){var t={};return e.password.length<7&&(t.password="Password should be longer 7 symbols"),e.password!==e.confPass&&(t.password="Password not identical"),t},onSubmit:function(e){n(U(e.password,a.token)),r.resetForm()}});return e?Object(F.jsx)(u.a,{to:"/sign-in"}):Object(F.jsx)("div",{className:D.a.authBlock,children:Object(F.jsxs)("form",{onSubmit:r.handleSubmit,className:D.a.inputBlock,children:[Object(F.jsx)("input",{placeholder:"password:",name:"password",onChange:r.handleChange,value:r.values.password}),Object(F.jsx)("input",{placeholder:"confirm password:",name:"confPass",type:"password",onChange:r.handleChange,value:r.values.confPass}),r.errors.password&&Object(F.jsx)("div",{style:{color:"red"},children:r.errors.password}),Object(F.jsx)("button",{type:"submit",children:"Change password"}),Object(F.jsx)("div",{style:{color:"red"},children:t})]})})},ae=n(34),re=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user.name})),n=Object(o.c)((function(e){return e.auth.user.avatar})),r=Object(a.useState)(t),c=Object(ae.a)(r,2),s=c[0],i=c[1],u=Object(a.useState)(n),l=Object(ae.a)(u,2),d=l[0],j=l[1],b={name:s,avatar:d};return Object(F.jsxs)("div",{children:[Object(F.jsx)("input",{placeholder:"new name",value:s,type:"text",onChange:function(e){i(e.currentTarget.value)}}),Object(F.jsx)("input",{placeholder:"new URL for Ava",value:d,type:"text",onChange:function(e){j(e.currentTarget.value)}}),Object(F.jsx)("button",{onClick:function(){e(R(b))},children:"Submit"})]})},ce={PROFILE:"/profile",SIGN_IN:"/sign-in",SIGN_UP:"/sign-up",NEW_PASS:"/new-pass",RENEWAL_PASS:"/renewal-pass",ERROR:"/404",UPDATE_USER:"/update-user"},se=function(){return Object(F.jsx)("div",{children:Object(F.jsxs)(u.d,{children:[Object(F.jsx)(u.b,{path:"/",exact:!0,component:B}),Object(F.jsx)(u.b,{path:ce.PROFILE,component:B}),Object(F.jsx)(u.b,{path:ce.PROFILE,component:H}),Object(F.jsx)(u.b,{path:ce.SIGN_IN,component:ee}),Object(F.jsx)(u.b,{path:ce.SIGN_UP,component:te}),Object(F.jsx)(u.b,{path:ce.NEW_PASS,component:ne}),Object(F.jsx)(u.b,{path:ce.RENEWAL_PASS,component:Z}),Object(F.jsx)(u.b,{path:ce.UPDATE_USER,component:re}),Object(F.jsx)(u.b,{path:"/404",render:function(){return Object(F.jsx)("h1",{children:"404:PAGE NOT FOUND"})}}),Object(F.jsx)(u.a,{from:"*",to:ce.ERROR})]})})},oe=n(8),ie=n.n(oe),ue=function(){var e=Object(o.b)(),t=Object(a.useCallback)((function(){e((function(e){m().then((function(t){t.data.info&&e(I(!1))})).catch((function(t){var n=t.res?t.res.data.error:t.message+", more details in the console";console.log("Error:",Object(l.a)({},t)),e(y(n))}))}))}),[e]);return Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:t,children:"Logout"}),"Logout in Here"]})};var le=function(){var e=Object(o.c)((function(e){return e.auth.isLogged}));return Object(F.jsxs)("nav",{className:ie.a.nav,children:[Object(F.jsx)("span",{className:ie.a.logOut,children:e&&Object(F.jsx)(ue,{})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.UPDATE_USER,activeClassName:ie.a.activeLink,replace:!0,children:" Settings "})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.PROFILE,activeClassName:ie.a.activeLink,replace:!0,children:" My Profile "})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.SIGN_IN,activeClassName:ie.a.activeLink,replace:!0,children:"sign-in"})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.SIGN_UP,activeClassName:ie.a.activeLink,replace:!0,children:"sign-up"})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.NEW_PASS,activeClassName:ie.a.activeLink,replace:!0,children:"new Pass"})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.RENEWAL_PASS,activeClassName:ie.a.activeLink,replace:!0,children:"Get the new Pass"})})]})};var de=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isInitialized}));return Object(a.useEffect)((function(){e(A())}),[]),t?Object(F.jsx)(i.a,{children:Object(F.jsxs)("div",{className:"mainPage",children:[Object(F.jsx)(le,{}),Object(F.jsx)(se,{})]})}):Object(F.jsx)("div",{children:"Loading"})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},be=n(27),pe=n(47),he=Object(be.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(l.a)(Object(l.a)({},e),{},{isLogged:t.value});case S:return Object(l.a)(Object(l.a)({},e),{},{user:t.user});case g:return Object(l.a)(Object(l.a)({},e),{},{isRegister:t.newValueIsRegister});case w:return Object(l.a)(Object(l.a)({},e),{},{commonError:t.error});case N:return Object(l.a)(Object(l.a)({},e),{},{updatedUser:t.data});case P:return Object(l.a)(Object(l.a)({},e),{},{isInitialized:t.value});case C:return Object(l.a)(Object(l.a)({},e),{},{isUpdatedPassword:t.isUpPassword});case E:return Object(l.a)(Object(l.a)({},e),{},{fogot:t.newFogot});default:return e}}}),me=Object(be.c)(he,Object(be.a)(pe.a));window.store=me;var Oe=me;s.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(o.a,{store:Oe,children:Object(F.jsx)(de,{})})}),document.getElementById("root")),je()},8:function(e,t,n){e.exports={nav:"Header_nav__1BzxD",item:"Header_item__1Kwze",activeLink:"Header_activeLink__DiCTj",logOut:"Header_logOut__21oX-"}}},[[77,1,2]]]);
//# sourceMappingURL=main.59e2f41c.chunk.js.map