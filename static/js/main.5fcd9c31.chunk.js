(this.webpackJsonpfridayproject=this.webpackJsonpfridayproject||[]).push([[0],{15:function(e,t,n){e.exports={authBlock:"CommonStylesForAuth_authBlock__exBWM",inputBlock:"CommonStylesForAuth_inputBlock__2_2J5"}},26:function(e,t,n){e.exports={default:"SuperButton_default__eiBUH",red:"SuperButton_red__2rcg3",button:"SuperButton_button__1L-zn",blink:"SuperButton_blink__1ylgH"}},32:function(e,t,n){e.exports={superInput:"SuperInputText_superInput__1v9gu",errorInput:"SuperInputText_errorInput__hdBbv",error:"SuperInputText_error__h1p0E"}},33:function(e,t,n){e.exports={checkbox:"SuperCheckbox_checkbox__36X5A",spanClassName:"SuperCheckbox_spanClassName__1lt84"}},55:function(e,t,n){},56:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),o=n(2),i=(n(55),n(7)),u=(n(56),n(5)),l=n(4),d=n(44),j=n.n(d).a.create({baseURL:"http://localhost:7542/2.0/",withCredentials:!0}),b=function(e,t,n){return j.post("auth/login",{email:e,password:t,rememberMe:n})},p=function(){return j.post("auth/me")},h=function(e){return j.post("auth/register",e)},O=function(){return j.delete("auth/me")},m=function(e){return j.put("auth/me",e)},f=function(e,t){return j.post("auth/set-new-password",{password:e,resetPasswordToken:t})},v={isLogged:!1,user:{id:"",email:"",name:"",avatar:""},isRegister:!1,commonError:"",isUpdatedPassword:!1,isInitialized:!1,updatedUser:{name:"",avatar:""}},x="AUTH/SWITCH-IS-REGISTR",g="AUTH/SET-ERROR-REGISTR",w="AUTH/SET-USER",S="AUTH/SIGN-IN",_="AUTH/SET-UPDATE-USER",N="AUTH/SET-NEW-PASSWORD",E="IS-INITIALIZED",P=function(e){return{type:g,error:e}},C=function(e){return{type:S,value:e}},y=function(e,t){var n={email:e,password:t};return function(e){h(n).then((function(t){t.data.addedUser?e({type:x,newValueIsRegister:!0}):e(P(t.data.error))})).catch((function(t){e(P("Common error"))}))}},I=function(){return function(e){p().then((function(t){var n=t.data,a=n.id,r=n.email,c=n.name,s=n.avatar;e(function(e,t,n,a){return{type:w,user:{id:e,email:t,name:n,avatar:a}}}(a,r,c,s))}))}},k=function(e){return function(t){m(e).then((function(n){t(function(e){return{type:_,data:e}}(e))}))}},R=function(){return function(e){p().then((function(t){e(C(!0))})).catch((function(){})).finally((function(){e({type:E,value:!0})}))}},A=function(e,t){return function(n){f(e,t).then((function(e){0===e.data.error.length?n({type:N,isUpPassword:!0}):n(P(e.data.error))}))}},L=n(1),U=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user.name})),n=Object(o.c)((function(e){return e.auth.user.email})),r=Object(o.c)((function(e){return e.auth.user.avatar})),c=Object(o.c)((function(e){return e.auth.isLogged}));return Object(a.useEffect)((function(){e(I())}),[e]),c?Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{children:Object(L.jsx)("img",{src:r,alt:""})}),Object(L.jsx)("div",{children:t}),Object(L.jsx)("div",{children:n})]}):Object(L.jsx)(u.a,{to:ne.SIGN_IN})},T=function(){return Object(L.jsx)("div",{children:Object(L.jsx)("h1",{})})},B=n(21),F=n(32),H=n.n(F),G=function(e){e.type;var t=e.onChange,n=e.onChangeText,a=e.onKeyPress,r=e.onEnter,c=e.error,s=e.className,o=e.spanClassName,i=Object(B.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),u="".concat(H.a.error," ").concat(o||""),d="".concat(H.a.errorInput," ").concat(s);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("input",Object(l.a)({type:"text",onChange:function(e){t&&t(e),n&&n(e.currentTarget.value)},onKeyPress:function(e){a&&a(e),r&&"Enter"===e.key&&r()},className:d},i)),c&&Object(L.jsx)("span",{className:u,children:c})]})},W=n(15),D=n.n(W),M=function(){return Object(L.jsxs)("div",{className:D.a.authBlock,children:[Object(L.jsx)(G,{}),"Renew your Pass"]})},Z=n(26),V=n.n(Z),q=function(e){var t=e.red,n=e.className,a=Object(B.a)(e,["red","className"]),r="".concat(V.a.default).concat(t?V.a.red:V.a.default," ").concat(n);return Object(L.jsx)("button",Object(l.a)(Object(l.a)({className:r},a),{},{children:"LogIn "}))},z=n(33),J=n.n(z),K=function(e){e.type;var t=e.onChange,n=e.onChangeChecked,a=e.className,r=(e.spanClassName,e.children),c=Object(B.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),s="".concat(J.a.checkbox," ").concat(a||"");return Object(L.jsxs)("label",{children:[Object(L.jsx)("input",Object(l.a)({type:"checkbox",onChange:function(e){t&&t(e),n&&n(e.currentTarget.checked)},className:s},c)),r&&Object(L.jsx)("span",{className:J.a.spanClassName,children:r})]})},$=n(20),X=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isLogged})),n=Object($.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Password required",t},onSubmit:function(t){var a,r,c;e((a=t.email,r=t.password,c=t.rememberMe,function(e){b(a,r,c).then((function(t){e(C(!0))})).catch((function(e){e.res?e.res.data.error:e.message,console.log("Error:",Object(l.a)({},e))})).finally((function(){}))})),n.resetForm()}});return t?Object(L.jsx)(u.a,{to:ne.PROFILE}):Object(L.jsx)("form",{onSubmit:n.handleSubmit,className:D.a.authBlock,children:Object(L.jsxs)("div",{className:D.a.inputBlock,children:[Object(L.jsx)("div",{children:Object(L.jsx)(G,Object(l.a)({placeholder:"Username or email",type:"email"},n.getFieldProps("email")))}),n.touched.email&&n.errors.email&&Object(L.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object(L.jsx)("div",{children:Object(L.jsx)(G,Object(l.a)({placeholder:"password",type:"password"},n.getFieldProps("password")))}),n.touched.password&&n.errors.password&&Object(L.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(L.jsx)("div",{children:Object(L.jsx)(K,Object(l.a)({type:"rememberMe"},n.getFieldProps("rememberMe")))}),Object(L.jsx)(q,{type:"submit",children:"Sign in HERE"}),Object(L.jsx)("div",{children:Object(L.jsx)(i.b,{to:ne.RENEWAL_PASS,children:"Forgot password"})})]})})},Q=function(){var e=Object(o.c)((function(e){return e.auth.isRegister})),t=Object(o.c)((function(e){return e.auth.commonError})),n=Object(o.b)(),a=Object($.a)({initialValues:{email:"",password:"",confPass:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password?e.password.length<7&&(t.password="Password should be longer 7 symbols"):t.password="Password required",e.password!==e.confPass&&(t.password="Password not identical"),t},onSubmit:function(e){var t,r;a.resetForm(),t=e.email,r=e.password,n(y(t,r))}});return e?Object(L.jsx)(u.a,{to:"/sign-in"}):Object(L.jsx)("div",{className:D.a.authBlock,children:Object(L.jsxs)("form",{className:D.a.inputBlock,onSubmit:a.handleSubmit,children:[Object(L.jsx)("input",{placeholder:"email:",name:"email",onChange:a.handleChange,value:a.values.email}),a.errors.email&&Object(L.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(L.jsx)("input",{placeholder:"password:",name:"password",type:"password",onChange:a.handleChange,value:a.values.password}),Object(L.jsx)("input",{placeholder:"confirm password:",name:"confPass",type:"password",onChange:a.handleChange,value:a.values.confPass}),a.errors.password&&Object(L.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(L.jsx)("button",{type:"submit",children:"Sign up"}),Object(L.jsx)("div",{style:{color:"red"},children:t})]})})},Y=function(){var e=Object(o.c)((function(e){return e.auth.isUpdatedPassword})),t=Object(o.c)((function(e){return e.auth.commonError})),n=Object(o.b)(),a=Object(u.g)(),r=Object($.a)({initialValues:{password:"",confPass:""},validate:function(e){var t={};return e.password.length<7&&(t.password="Password should be longer 7 symbols"),e.password!==e.confPass&&(t.password="Password not identical"),t},onSubmit:function(e){r.resetForm(),n(A(e.password,a.token))}});return e?Object(L.jsx)(u.a,{to:"/sign-in"}):Object(L.jsx)("div",{className:D.a.authBlock,children:Object(L.jsxs)("form",{onSubmit:r.handleSubmit,className:D.a.inputBlock,children:[Object(L.jsx)("input",{placeholder:"password:",name:"password",onChange:r.handleChange,value:r.values.password}),Object(L.jsx)("input",{placeholder:"confirm password:",name:"confPass",type:"password",onChange:r.handleChange,value:r.values.confPass}),r.errors.password&&Object(L.jsx)("div",{style:{color:"red"},children:r.errors.password}),Object(L.jsx)("button",{type:"submit",children:"Change password"}),Object(L.jsx)("div",{style:{color:"red"},children:t})]})})},ee=n(34),te=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user.name})),n=Object(o.c)((function(e){return e.auth.user.avatar})),r=Object(a.useState)(t),c=Object(ee.a)(r,2),s=c[0],i=c[1],u=Object(a.useState)(n),l=Object(ee.a)(u,2),d=l[0],j=l[1],b={name:s,avatar:d};Object(a.useEffect)((function(){e(k(b))}),[b]);return Object(L.jsxs)("div",{children:[Object(L.jsx)("input",{placeholder:"new name",value:s,type:"text",onChange:function(e){i(e.currentTarget.value)}}),Object(L.jsx)("input",{placeholder:"new URL for Ava",value:d,type:"text",onChange:function(e){j(e.currentTarget.value)}})]})},ne={PROFILE:"/profile",SIGN_IN:"/sign-in",SIGN_UP:"/sign-up",NEW_PASS:"/new-pass",RENEWAL_PASS:"/renewal-pass",ERROR:"/404",UPDATE_USER:"/update-user"},ae=function(){return Object(L.jsx)("div",{children:Object(L.jsxs)(u.d,{children:[Object(L.jsx)(u.b,{path:"/",exact:!0,component:U}),Object(L.jsx)(u.b,{path:ne.PROFILE,component:U}),Object(L.jsx)(u.b,{path:ne.PROFILE,component:T}),Object(L.jsx)(u.b,{path:ne.SIGN_IN,component:X}),Object(L.jsx)(u.b,{path:ne.SIGN_UP,component:Q}),Object(L.jsx)(u.b,{path:ne.NEW_PASS,component:Y}),Object(L.jsx)(u.b,{path:ne.RENEWAL_PASS,component:M}),Object(L.jsx)(u.b,{path:ne.UPDATE_USER,component:te}),Object(L.jsx)(u.b,{path:"/404",render:function(){return Object(L.jsx)("h1",{children:"404:PAGE NOT FOUND"})}}),Object(L.jsx)(u.a,{from:"*",to:ne.ERROR})]})})},re=n(8),ce=n.n(re),se=function(){var e=Object(o.b)(),t=Object(a.useCallback)((function(){e((function(e){O().then((function(t){t.data.info&&e(C(!1))})).catch((function(){}))}))}),[e]);return Object(L.jsxs)("div",{children:[Object(L.jsx)("button",{onClick:t,children:"Logout"}),"Logout in Here"]})};var oe=function(){var e=Object(o.c)((function(e){return e.auth.isLogged}));return Object(L.jsxs)("nav",{className:ce.a.nav,children:[Object(L.jsx)("span",{className:ce.a.logOut,children:e&&Object(L.jsx)(se,{})}),Object(L.jsx)("div",{className:ce.a.item,children:Object(L.jsx)(i.b,{to:ne.UPDATE_USER,activeClassName:ce.a.activeLink,replace:!0,children:" Settings "})}),Object(L.jsx)("div",{className:ce.a.item,children:Object(L.jsx)(i.b,{to:ne.PROFILE,activeClassName:ce.a.activeLink,replace:!0,children:" My Profile "})}),Object(L.jsx)("div",{className:ce.a.item,children:Object(L.jsx)(i.b,{to:ne.SIGN_IN,activeClassName:ce.a.activeLink,replace:!0,children:"sign-in"})}),Object(L.jsx)("div",{className:ce.a.item,children:Object(L.jsx)(i.b,{to:ne.SIGN_UP,activeClassName:ce.a.activeLink,replace:!0,children:"sign-up"})}),Object(L.jsx)("div",{className:ce.a.item,children:Object(L.jsx)(i.b,{to:ne.NEW_PASS,activeClassName:ce.a.activeLink,replace:!0,children:"new Pass"})}),Object(L.jsx)("div",{className:ce.a.item,children:Object(L.jsx)(i.b,{to:ne.RENEWAL_PASS,activeClassName:ce.a.activeLink,replace:!0,children:"Get the new Pass"})})]})};var ie=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isInitialized}));return Object(a.useEffect)((function(){e(R())}),[]),t?Object(L.jsx)(i.a,{children:Object(L.jsxs)("div",{className:"mainPage",children:[Object(L.jsx)(oe,{}),Object(L.jsx)(ae,{})]})}):Object(L.jsx)("div",{children:"Loading"})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},le=n(27),de=n(47),je=Object(le.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(l.a)(Object(l.a)({},e),{},{isLogged:t.value});case w:return Object(l.a)(Object(l.a)({},e),{},{user:t.user});case x:return Object(l.a)(Object(l.a)({},e),{},{isRegister:t.newValueIsRegister});case g:return Object(l.a)(Object(l.a)({},e),{},{commonError:t.error});case _:return Object(l.a)(Object(l.a)({},e),{},{updatedUser:t.data});case E:return Object(l.a)(Object(l.a)({},e),{},{isInitialized:t.value});case N:return Object(l.a)(Object(l.a)({},e),{},{isUpdatedPassword:t.isUpPassword});default:return e}}}),be=Object(le.c)(je,Object(le.a)(de.a));window.store=be;var pe=be;s.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(o.a,{store:pe,children:Object(L.jsx)(ie,{})})}),document.getElementById("root")),ue()},8:function(e,t,n){e.exports={nav:"Header_nav__2U9p-",item:"Header_item__OvyLV",activeLink:"Header_activeLink__J-tfk",logOut:"Header_logOut__rrsbp"}}},[[77,1,2]]]);
//# sourceMappingURL=main.5fcd9c31.chunk.js.map