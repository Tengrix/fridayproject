(this.webpackJsonpfridayproject=this.webpackJsonpfridayproject||[]).push([[0],{12:function(e,t,a){e.exports={authBlock:"CommonStylesForAuth_authBlock__15zKS",inputBlock:"CommonStylesForAuth_inputBlock__20tX8"}},26:function(e,t,a){e.exports={default:"SuperButton_default__18Len",red:"SuperButton_red__3BY6U",button:"SuperButton_button__1Ymxf",blink:"SuperButton_blink__3T8lZ"}},32:function(e,t,a){e.exports={superInput:"SuperInputText_superInput__1Gc67",errorInput:"SuperInputText_errorInput__2sjb_",error:"SuperInputText_error__1oSiw"}},33:function(e,t,a){e.exports={checkbox:"SuperCheckbox_checkbox__2dgcj",spanClassName:"SuperCheckbox_spanClassName__3r9pY"}},55:function(e,t,a){},56:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),s=a.n(c),o=a(2),i=(a(55),a(7)),l=(a(56),a(5)),u=a(3),d=a(44),j=a.n(d).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),b=function(e,t,a){return j.post("auth/login",{email:e,password:t,rememberMe:a})},h=function(){return j.post("auth/me")},p=function(e){return j.post("auth/register",e)},m=function(){return j.delete("auth/me")},O=function(e){return j.put("auth/me",e)},f=function(e,t){return j.post("auth/forgot",{email:e,message:t})},v=function(e,t){return j.post("auth/set-new-password",{password:e,resetPasswordToken:t})},x={isLogged:!1,user:{id:"",email:"",name:"",avatar:""},isRegister:!1,commonError:"",isUpdatedPassword:!1,fogot:!1,isInitialized:!1,updatedUser:{name:"",avatar:""}},g="AUTH/SWITCH-IS-REGISTR",w="AUTH/SET-ERROR-REGISTR",S="AUTH/SET-USER",N="AUTH/SIGN-IN",_="AUTH/SET-UPDATE-USER",E="AUTH/SET-NEW-PASSWORD",y="AUTH/SWITCH-FOGOT",C="IS-INITIALIZED",P=function(e){return{type:w,error:e}},k=function(e){return{type:N,value:e}},I=function(e,t){var a={email:e,password:t};return function(e){p(a).then((function(t){t.data.addedUser?e({type:g,newValueIsRegister:!0}):e(P(t.data.error))})).catch((function(t){var a=t.res?t.res.data.error:t.message+", more details in the console";console.log("Error:",Object(u.a)({},t)),e(P(a))}))}},A=function(){return function(e){h().then((function(t){var a=t.data,n=a.id,r=a.email,c=a.name,s=a.avatar;e(function(e,t,a,n){return{type:S,user:{id:e,email:t,name:a,avatar:n}}}(n,r,c,s))}))}},R=function(e){return function(t){O(e).then((function(a){t(function(e){return{type:_,data:e}}(e))})).finally((function(){console.log("check profile")})).catch((function(e){var a=e.res?e.res.data.error:e.message+", more details in the console";console.log("Error:",Object(u.a)({},e)),t(P(a))}))}},T=function(){return function(e){h().then((function(t){e(k(!0))})).catch((function(){})).finally((function(){e({type:C,value:!0})}))}},L=function(e,t){return function(a){f(e,t).then((function(e){e.data.error?a(P(e.data.error)):a({type:y,newFogot:!0})})).catch((function(e){var t=e.res?e.res.data.error:e.message+", more details in the console";console.log("Error:",Object(u.a)({},e)),a(P(t))}))}},U=function(e,t){return function(a){v(e,t).then((function(e){e.data.error?a(P(e.data.error)):a({type:E,isUpPassword:!0})})).catch((function(e){var t=e.res?e.res.data.error:e.message+", more details in the console";console.log("Error:",Object(u.a)({},e)),a(P(t))}))}},F=a(1),B=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user.name})),a=Object(o.c)((function(e){return e.auth.user.email})),r=Object(o.c)((function(e){return e.auth.user.avatar})),c=Object(o.c)((function(e){return e.auth.isLogged}));return Object(n.useEffect)((function(){e(A())}),[e]),c?Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{children:Object(F.jsx)("img",{src:r,alt:""})}),Object(F.jsx)("div",{children:t}),Object(F.jsx)("div",{children:a})]}):Object(F.jsx)(l.a,{to:ce.SIGN_IN})},H=function(){return Object(F.jsx)("div",{children:Object(F.jsx)("h1",{})})},G=a(18),W=a(12),Z=a.n(W),D=function(){var e=Object(o.c)((function(e){return e.auth.fogot})),t=Object(o.c)((function(e){return e.auth.commonError})),a=Object(o.b)(),n=Object(G.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",t},onSubmit:function(e){a(L(e.email,"<div style=\"background-color: lime; padding: 15px\"> \n    password recovery link: <a href='https://tengrix.github.io/fridayproject/#/new-pass/$token$'>Click to here</a></div>")),n.resetForm()}});return e?Object(F.jsx)("div",{className:Z.a.authBlock,children:Object(F.jsx)("div",{children:"Checked your email!"})}):Object(F.jsx)("div",{className:Z.a.authBlock,children:Object(F.jsxs)("form",{onSubmit:n.handleSubmit,className:Z.a.inputBlock,children:[Object(F.jsx)("input",{placeholder:"email",name:"email",onChange:n.handleChange,value:n.values.email}),Object(F.jsx)("button",{type:"submit",children:"Send message"}),n.errors.email&&Object(F.jsx)("div",{style:{color:"red"},children:n.errors.email}),t&&Object(F.jsx)("div",{style:{color:"red"},children:t})]})})},M=a(21),z=a(26),V=a.n(z),q=function(e){var t=e.red,a=e.className,n=Object(M.a)(e,["red","className"]),r="".concat(V.a.default).concat(t?V.a.red:V.a.default," ").concat(a);return Object(F.jsx)("button",Object(u.a)(Object(u.a)({className:r},n),{},{children:"LogIn "}))},K=a(32),$=a.n(K),Y=function(e){e.type;var t=e.onChange,a=e.onChangeText,n=e.onKeyPress,r=e.onEnter,c=e.error,s=e.className,o=e.spanClassName,i=Object(M.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),l="".concat($.a.error," ").concat(o||""),d="".concat($.a.errorInput," ").concat(s);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("input",Object(u.a)({type:"text",onChange:function(e){t&&t(e),a&&a(e.currentTarget.value)},onKeyPress:function(e){n&&n(e),r&&"Enter"===e.key&&r()},className:d},i)),c&&Object(F.jsx)("span",{className:l,children:c})]})},J=a(33),X=a.n(J),Q=function(e){e.type;var t=e.onChange,a=e.onChangeChecked,n=e.className,r=(e.spanClassName,e.children),c=Object(M.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),s="".concat(X.a.checkbox," ").concat(n||"");return Object(F.jsxs)("label",{children:[Object(F.jsx)("input",Object(u.a)({type:"checkbox",onChange:function(e){t&&t(e),a&&a(e.currentTarget.checked)},className:s},c)),r&&Object(F.jsx)("span",{className:X.a.spanClassName,children:r})]})},ee=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isLogged})),a=Object(G.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password?e.password.length<4&&(t.password="Invalid password"):t.password="Password required",t},onSubmit:function(t){var n,r,c;e((n=t.email,r=t.password,c=t.rememberMe,function(e){b(n,r,c).then((function(t){e(k(!0))})).catch((function(t){var a=t.res?t.res.data.error:t.message+", more details in the console";console.log("Error:",Object(u.a)({},t)),e(P(a))})).finally((function(){}))})),a.resetForm()}});return t?Object(F.jsx)(l.a,{to:ce.PROFILE}):Object(F.jsx)("form",{onSubmit:a.handleSubmit,className:Z.a.authBlock,children:Object(F.jsxs)("div",{className:Z.a.inputBlock,children:[Object(F.jsx)("div",{children:Object(F.jsx)(Y,Object(u.a)({placeholder:"Username or email",type:"email"},a.getFieldProps("email")))}),a.touched.email&&a.errors.email&&Object(F.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(F.jsx)("div",{children:Object(F.jsx)(Y,Object(u.a)({placeholder:"password",type:"password"},a.getFieldProps("password")))}),a.touched.password&&a.errors.password&&Object(F.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(F.jsx)("div",{children:Object(F.jsx)(Q,Object(u.a)({type:"rememberMe"},a.getFieldProps("rememberMe")))}),Object(F.jsx)(q,{type:"submit",children:"Sign in HERE"}),Object(F.jsx)("div",{children:Object(F.jsx)(i.b,{to:ce.RENEWAL_PASS,children:"Forgot password"})})]})})},te=function(){var e=Object(o.c)((function(e){return e.auth.isRegister})),t=Object(o.c)((function(e){return e.auth.commonError})),a=Object(o.b)(),n=Object(G.a)({initialValues:{email:"",password:"",confPass:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email required",e.password?e.password.length<7&&(t.password="Password should be longer 7 symbols"):t.password="Password required",e.password!==e.confPass&&(t.password="Password not identical"),t},onSubmit:function(e){var t,r;n.resetForm(),t=e.email,r=e.password,a(I(t,r))}});return e?Object(F.jsx)(l.a,{to:"/sign-in"}):Object(F.jsx)("div",{className:Z.a.authBlock,children:Object(F.jsxs)("form",{className:Z.a.inputBlock,onSubmit:n.handleSubmit,children:[Object(F.jsx)("input",{placeholder:"email:",name:"email",onChange:n.handleChange,value:n.values.email}),n.errors.email&&Object(F.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object(F.jsx)("input",{placeholder:"password:",name:"password",type:"password",onChange:n.handleChange,value:n.values.password}),Object(F.jsx)("input",{placeholder:"confirm password:",name:"confPass",type:"password",onChange:n.handleChange,value:n.values.confPass}),n.errors.password&&Object(F.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(F.jsx)("button",{type:"submit",children:"Sign up"}),Object(F.jsx)("div",{style:{color:"red"},children:t})]})})},ae=function(){var e=Object(o.c)((function(e){return e.auth.isUpdatedPassword})),t=Object(o.c)((function(e){return e.auth.commonError})),a=Object(o.b)(),n=Object(l.g)().token,r=Object(G.a)({initialValues:{password:"",confPass:""},validate:function(e){var t={};return e.password.length<7&&(t.password="Password should be longer 7 symbols"),e.password!==e.confPass&&(t.password="Password not identical"),t},onSubmit:function(e){a(U(e.password,n)),r.resetForm()}});return e?Object(F.jsx)(l.a,{to:"/sign-in"}):Object(F.jsx)("div",{className:Z.a.authBlock,children:Object(F.jsxs)("form",{onSubmit:r.handleSubmit,className:Z.a.inputBlock,children:[Object(F.jsx)("input",{placeholder:"password:",name:"password",type:"password",onChange:r.handleChange,value:r.values.password}),Object(F.jsx)("input",{placeholder:"confirm password:",name:"confPass",type:"password",onChange:r.handleChange,value:r.values.confPass}),r.errors.password&&Object(F.jsx)("div",{style:{color:"red"},children:r.errors.password}),Object(F.jsx)("button",{type:"submit",children:"Change password"}),Object(F.jsx)("div",{style:{color:"red"},children:t})]})})},ne=a(34),re=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.user.name})),a=Object(o.c)((function(e){return e.auth.user.avatar})),r=Object(n.useState)(t),c=Object(ne.a)(r,2),s=c[0],i=c[1],l=Object(n.useState)(a),u=Object(ne.a)(l,2),d=u[0],j=u[1],b={name:s,avatar:d};return Object(F.jsxs)("div",{children:[Object(F.jsx)("input",{placeholder:"new name",value:s,type:"text",onChange:function(e){i(e.currentTarget.value)}}),Object(F.jsx)("input",{placeholder:"new URL for Ava",value:d,type:"text",onChange:function(e){j(e.currentTarget.value)}}),Object(F.jsx)("button",{onClick:function(){e(R(b))},children:"Submit"})]})},ce={PROFILE:"/profile",SIGN_IN:"/sign-in",SIGN_UP:"/sign-up",NEW_PASS:"/new-pass/:token?",RENEWAL_PASS:"/renewal-pass",ERROR:"/404",UPDATE_USER:"/update-user"},se=function(){return Object(F.jsx)("div",{children:Object(F.jsxs)(l.d,{children:[Object(F.jsx)(l.b,{path:"/",exact:!0,component:B}),Object(F.jsx)(l.b,{path:ce.PROFILE,component:B}),Object(F.jsx)(l.b,{path:ce.PROFILE,component:H}),Object(F.jsx)(l.b,{path:ce.SIGN_IN,component:ee}),Object(F.jsx)(l.b,{path:ce.SIGN_UP,component:te}),Object(F.jsx)(l.b,{path:ce.NEW_PASS,component:ae}),Object(F.jsx)(l.b,{path:ce.RENEWAL_PASS,component:D}),Object(F.jsx)(l.b,{path:ce.UPDATE_USER,component:re}),Object(F.jsx)(l.b,{path:"/404",render:function(){return Object(F.jsx)("h1",{children:"404:PAGE NOT FOUND"})}}),Object(F.jsx)(l.a,{from:"*",to:ce.ERROR})]})})},oe=a(8),ie=a.n(oe),le=function(){var e=Object(o.b)(),t=Object(n.useCallback)((function(){e((function(e){m().then((function(t){t.data.info&&e(k(!1))})).catch((function(t){var a=t.res?t.res.data.error:t.message+", more details in the console";console.log("Error:",Object(u.a)({},t)),e(P(a))}))}))}),[e]);return Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{onClick:t,children:"Logout"}),"Logout in Here"]})};var ue=function(){var e=Object(o.c)((function(e){return e.auth.isLogged}));return Object(F.jsxs)("nav",{className:ie.a.nav,children:[Object(F.jsx)("span",{className:ie.a.logOut,children:e&&Object(F.jsx)(le,{})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.UPDATE_USER,activeClassName:ie.a.activeLink,replace:!0,children:" Settings "})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.PROFILE,activeClassName:ie.a.activeLink,replace:!0,children:" My Profile "})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.SIGN_IN,activeClassName:ie.a.activeLink,replace:!0,children:"sign-in"})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.SIGN_UP,activeClassName:ie.a.activeLink,replace:!0,children:"sign-up"})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.NEW_PASS,activeClassName:ie.a.activeLink,replace:!0,children:"new Pass"})}),Object(F.jsx)("div",{className:ie.a.item,children:Object(F.jsx)(i.b,{to:ce.RENEWAL_PASS,activeClassName:ie.a.activeLink,replace:!0,children:"Get the new Pass"})})]})};var de=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.isInitialized}));return Object(n.useEffect)((function(){e(T())}),[]),t?Object(F.jsx)(i.a,{children:Object(F.jsxs)("div",{className:"mainPage",children:[Object(F.jsx)(ue,{}),Object(F.jsx)(se,{})]})}):Object(F.jsx)("div",{children:"Loading"})},je=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},be=a(27),he=a(47),pe=Object(be.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(u.a)(Object(u.a)({},e),{},{isLogged:t.value});case S:return Object(u.a)(Object(u.a)({},e),{},{user:t.user});case g:return Object(u.a)(Object(u.a)({},e),{},{isRegister:t.newValueIsRegister});case w:return Object(u.a)(Object(u.a)({},e),{},{commonError:t.error});case _:return Object(u.a)(Object(u.a)({},e),{},{updatedUser:t.data});case C:return Object(u.a)(Object(u.a)({},e),{},{isInitialized:t.value});case E:return Object(u.a)(Object(u.a)({},e),{},{isUpdatedPassword:t.isUpPassword});case y:return Object(u.a)(Object(u.a)({},e),{},{fogot:t.newFogot});default:return e}}}),me=Object(be.c)(pe,Object(be.a)(he.a));window.store=me;var Oe=me;s.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(o.a,{store:Oe,children:Object(F.jsx)(de,{})})}),document.getElementById("root")),je()},8:function(e,t,a){e.exports={nav:"Header_nav__1BzxD",item:"Header_item__1Kwze",activeLink:"Header_activeLink__DiCTj",logOut:"Header_logOut__21oX-"}}},[[77,1,2]]]);
//# sourceMappingURL=main.774f418c.chunk.js.map